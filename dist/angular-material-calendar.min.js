angular.module("materialCalendar",["ngMaterial","ngSanitize"]),angular.module("materialCalendar").constant("config",{version:"0.2.12",debug:document.domain.indexOf("localhost")>-1}),angular.module("materialCalendar").config(["config","$logProvider","$compileProvider",function(t,a,e){t.debug&&(a.debugEnabled(!1),e.debugInfoEnabled(!1))}]),angular.module("materialCalendar").service("Calendar",[function(){function t(t,a,e){var n=new Date;this.setWeekStartsOn=function(t){var a=parseInt(t||0,10);return this.weekStartsOn=!isNaN(a)&&a>=0&&6>=a?a:0,this.weekStartsOn},this.options=angular.isObject(e)?e:{},this.year=n.getFullYear(),this.month=n.getMonth(),this.weeks=[],this.weekStartsOn=this.setWeekStartsOn(this.options.weekStartsOn),this.next=function(){return this.start.getMonth()<11?void this.init(this.start.getFullYear(),this.start.getMonth()+1):void this.init(this.start.getFullYear()+1,0)},this.prev=function(){return this.month?void this.init(this.start.getFullYear(),this.start.getMonth()-1):void this.init(this.start.getFullYear()-1,11)},this.init=function(t,a){var e=new Date;this.year=angular.isDefined(t)?t:e.getFullYear(),this.month=angular.isDefined(a)?a:e.getMonth();var n=[31,28,31,30,31,30,31,31,30,31,30,31],r=n[this.month];1===this.month&&(this.year%4===0&&this.year%100!==0||this.year%400===0)&&(r=29),this.start=new Date(this.year,this.month,1);for(var o=angular.copy(this.start);o.getDay()!==this.weekStartsOn;)o.setDate(o.getDate()-1),r++;for(;r%7!==0;)r++;this.weeks=[];for(var i=0;r>i;++i)i%7===0&&this.weeks.push([]),this.weeks[this.weeks.length-1].push(angular.copy(o)),o.setDate(o.getDate()+1)},this.init(t,a)}return t}]),angular.module("materialCalendar").service("CalendarData",[function(){function t(){this.data={},this.getDayKey=function(t){return[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-")},this.setDayContent=function(t,a){this.data[this.getDayKey(t)]=a||this.data[this.getDayKey(t)]||""}}return new t}]),angular.module("materialCalendar").directive("calendarMd",["$compile","$parse","$http","$q","Calendar","CalendarData",function(t,a,e,n,r,o){var i="",l=function(){var t="calendarMdCss";if(!document.getElementById(t)){var a=document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.id=t,e.innerHTML="calendar-md md-content>md-content.agenda>*>* :not(:first-child),calendar-md md-content>md-content.calendar>:not(:first-child)>* :last-child{overflow:hidden;text-overflow:ellipsis}calendar-md{display:block;max-height:100%}calendar-md .md-toolbar-tools h2{overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap}calendar-md md-content>md-content{border:1px solid rgba(0,0,0,.12)}calendar-md md-content>md-content.agenda>*>*{border-bottom:1px solid rgba(0,0,0,.12)}calendar-md md-content>md-content.agenda>*>* :first-child{padding:12px;width:200px;text-align:right;color:rgba(0,0,0,.75);font-weight:100;overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap}calendar-md md-content>md-content>*>*{min-width:48px}calendar-md md-content>md-content.calendar>:first-child{background:rgba(0,0,0,.02);border-bottom:1px solid rgba(0,0,0,.12);margin-right:0;min-height:36px}calendar-md md-content>md-content.calendar>:not(:first-child)>*{border-bottom:1px solid rgba(0,0,0,.12);border-right:1px solid rgba(0,0,0,.12);cursor:pointer}calendar-md md-content>md-content.calendar>:not(:first-child)>:hover{background:rgba(0,0,0,.04)}calendar-md md-content>md-content.calendar>:not(:first-child)>.disabled{color:rgba(0,0,0,.3);pointer-events:none;cursor:auto}calendar-md md-content>md-content.calendar>:not(:first-child)>.active{box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 2px 1px -1px rgba(0,0,0,.12);background:rgba(0,0,0,.02)}calendar-md md-content>md-content.calendar>:not(:first-child)>* :first-child{padding:0}",a.insertBefore(e,a.firstChild)}};return{restrict:"E",scope:{ngModel:"=?",template:"&",templateUrl:"=?",onDayClick:"=?",onPrevMonth:"=?",onNextMonth:"=?",calendarDirection:"=?",dayContent:"&?",timezone:"=?",titleFormat:"=?",dayFormat:"=?",dayLabelFormat:"=?",dayLabelTooltipFormat:"=?",dayTooltipFormat:"=?",weekStartsOn:"=?",tooltips:"&?",clearDataCacheOnLoad:"=?"},link:function(d,c,s){l();var h=new Date,u=parseInt(s.startMonth||h.getMonth()),m=parseInt(s.startYear||h.getFullYear());d.columnWeekLayout="column",d.weekLayout="row",d.timezone=d.timezone||null,d.noCache=s.clearDataCacheOnLoad||!1,s.ngModel?(d.active=d.$parent.$eval(s.ngModel),s.ngModel&&d.$watch("$parent."+s.ngModel,function(t){d.active=t})):d.active=null,d.titleFormat=d.titleFormat||"MMMM yyyy",d.dayLabelFormat=d.dayLabelFormat||"EEE",d.dayLabelTooltipFormat=d.dayLabelTooltipFormat||"EEEE",d.dayFormat=d.dayFormat||"d",d.dayTooltipFormat=d.dayTooltipFormat||"fullDate",d.sameMonth=function(t){var a=angular.copy(t);return a.getFullYear()===d.calendar.year&&a.getMonth()===d.calendar.month},d.calendarDirection=d.calendarDirection||"horizontal",d.$watch("calendarDirection",function(t){d.weekLayout="horizontal"===t?"row":"column"}),d.$watch("weekLayout",function(){m=d.calendar.year,u=d.calendar.month,D()});var g=function(t,a){(t||angular.noop)(a)},p=function(t,a){var e=-1;return angular.forEach(t,function(t,n){0>e&&angular.equals(a,t)&&(e=n)}),e};d.isActive=function(t){var a,e=angular.copy(d.active);return a=angular.isArray(e)?p(e,t)>-1:angular.equals(t,e)},d.prev=function(){d.calendar.prev();var t={year:d.calendar.year,month:d.calendar.month+1};b(),g(d.onPrevMonth,t)},d.next=function(){d.calendar.next();var t={year:d.calendar.year,month:d.calendar.month+1};b(),g(d.onNextMonth,t)},d.handleDayClick=function(t){var e=angular.copy(d.active);if(angular.isArray(e)){var n=p(e,t);n>-1?e.splice(n,1):e.push(t)}else e=angular.equals(e,t)?null:t;d.active=e,s.ngModel&&a(s.ngModel).assign(d.$parent,angular.copy(d.active)),g(d.onDayClick,angular.copy(t))};var f=function(a){c.html(a),t(c.contents())(d)},y=function(){d.calendar=new r(m,u,{weekStartsOn:d.weekStartsOn||0});var t=n.defer();return d.templateUrl?e.get(d.templateUrl).success(t.resolve).error(t.reject):t.resolve(d.template()||i),t.promise};d.dataService=o;var v=function(t){return d.dataService.getDayKey(t)};d.dayKey=v;var w=function(t){d.noCache?d.dataService.setDayContent(t,""):d.dataService.setDayContent(t,d.dataService.data[v(t)]||"");var a=(d.dayContent||angular.noop)(),e=(a||angular.noop)(t);angular.isObject(e)&&"function"==typeof e.success?e.success(function(a){d.dataService.setDayContent(t,a)}):angular.isObject(e)&&"function"==typeof e.then?e.then(function(a){d.dataService.setDayContent(t,a)}):d.dataService.setDayContent(t,e)},b=function(){angular.forEach(d.calendar.weeks,function(t){angular.forEach(t,w)})};window.data=d.data;var D=function(){y().then(function(t){f(t),b()})};d.$watch("weekStartsOn",y),D(),d._$$init=y,d._$$setTemplate=f,d._$$bootstrap=D}}}]);